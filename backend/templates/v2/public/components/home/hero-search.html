{% load i18n %}

<div class="relative pt-8 pb-4" x-data="ngoSearch" x-on:click.outside="close">
  <ul
    id="ngo-results"
    role="listbox"
    class="absolute w-full pt-10 overflow-auto text-sm bg-white border border-gray-300 shadow-lg rounded-2xl max-h-60 ring-1 ring-black/5 focus:outline-none sm:text-sm"
    x-show="isOpen"
    x-cloak
  >
    <template x-for="(ngo, index) in results" :key="index">
      <li
        class="relative cursor-default select-none"
        role="option"
        tabindex="-1">

        <a
          class="block px-3 py-2 text-gray-900 truncate hover:bg-amber-300 hover:outline-none"
          :href="ngo.url"
        >
          <span x-text="ngo.name"></span>
        </a>
      </li>
    </template>
  </ul>

  <label class="relative grid grid-cols-1 xl:max-w-2xl">
    {% trans "Search for an NGO by its name or CUI/CIF" as search_title %}
    <span class="sr-only">{{ search_title }}</span>

    <input
      type="text"
      class="border-none col-start-1 row-start-1 block w-full rounded-full bg-white py-1.5 pl-10 pr-3 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-amber-300 sm:pl-9 sm:text-sm/6 focus:outline-none"
      role="combobox"
      aria-controls="ngo-results"
      placeholder="{{ search_title }}"
      x-model.debounce="query"
      autocomplete="off"
      x-on:click="open"
    >

    <svg class="self-center col-start-1 row-start-1 ml-3 text-gray-400 pointer-events-none size-5 sm:size-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
      <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z" clip-rule="evenodd" />
    </svg>
  </label>
</div>
